<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
  <head>
    <title>Sophia-test</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script type="text/javascript" src="raphael.js"></script>
    <script type="text/javascript" src="jquery.enumerable.js"></script>
    <script type="text/javascript" src="jquery.tufte-graph.js"></script>
    <link rel="stylesheet" href="tufte-graph.css" type="text/css" media="screen" charset="utf-8" />

    <style>
      body { font-family: georgia; font-size: 14px }
      #container {
        margin: 0 auto;
        width: 730px;
      }
      .download {
        float: right;
        font-size: 1.5em;
      }
      .footer {
        width: 100%;
        text-align: center;
        color: #999999;
        font-size: 0.8em;
        margin-top: 30px;
      }

      
      .intro { font-size: 1.4em; }
      .differences { clear: both; }

      span.doc { color: green; font-weight: bold; }
      a { color: black; }
      a:visited { color: gray; }
      .example { float: left; }
      h2 { clear: both; }

      .awesome .graph-header { width: 370px; }
      .sales   .graph-header { width: 310px; }

      .sales { margin-left: 20px; }
      li { margin-bottom: 3px; }
    </style>


    <!--  <script type="text/javascript">
      $(document).ready(function () {
        var anndatares = [];
        jQuery.getJSON('new-sophia-test.json', function(anndata){
           var l = anndata.globals.sixteenth.length;
           var annres = [];
            for (var i=0;i<l;i++) {
             var testdata = anndata.globals.sixteenth[i].predictedUsage;
            annres[i]= [anndata.globals.sixteenth

[i].predictedUsage,anndata.globals.sixteenth[i].actualUsage];
            // console.log(testdata);
           }

            for (var i=0;i<l;i++) {
      
              var annk = anndata.globals.sixteenth[i].salesforceId;
              anndatares[i]= [annres[i],{label:anndata.globals.sixteenth

[i].salesforceId}];

            }
            console.log(annres[1]);
            console.log(anndatares[1]);
            //alert (l);
            alert ("additional script inside" + anndatares.length);

        });

        alert ("addit script outside" + " " + anndatares.length + " " + anndata.globals.sixteenth[i].predictedUsage);

      });
    </script> -->

    <script type="text/javascript">

   

      $(document).ready(function () {
      
        var datausers = [
            [[1.5, 1.0, 0.51], {label: '2005'}],
            [[2.0, 1.03, 0.6], {label: '2006'}],
            [[2.4, 0.9,  2.0], {label: '2007'}],
            [[1.5, 2.6, 0.45], {label: '2008'}]
          ];
          alert (datausers.length);
        jQuery('#stacked-graph').tufteBar({
          data: datausers,
          barLabel:  function(index) {
            amount = ($(this[0]).sum() * 10000).toFixed(0);
            return '$' + $.tufteBar.formatNumber(amount);
          },
          axisLabel: function(index) { return this[1].label },
          legend: {
            data: ["North", "East", "West"]
          }
        });

  
        var anndatares = [];

        jQuery.getJSON('new-sophia-test.json', function(anndata){
           var l = anndata.globals.sixteenth.length;
           var annres = [];
            for (var i=0;i<l;i++) {
      
             var testdata = anndata.globals.sixteenth[i].predictedUsage;
            annres[i]= [anndata.globals.sixteenth[i].predictedUsage,anndata.globals.sixteenth[i].actualUsage];
           }
           //alert ( anndata.domainY[1].name );
           //alert ( anndata.data[1].predictedUsage[2]);
           //alert ( anndata.globals.sixteenth[1].predictedUsage);
           //var anndatares = [];
            for (var i=0;i<l;i++) {
      
              var annk = anndata.globals.sixteenth[i].salesforceId;
              anndatares[i]= [annres[i],{label:anndata.globals.sixteenth[i].salesforceId}];
            }
            console.log(annres[1]);
            console.log(anndatares[1]);
            //alert (l);
            alert (anndatares.length);

            jQuery('#new-graph').tufteBar({
          data: anndatares,
          barLabel:  function(index) {
            amount = ($(this[0][1]).sum()).toFixed(0);
            return 'real' + $.tufteBar.formatNumber(amount);
          },
          axisLabel: function(index) { return this[1].label },
          legend: {
            data: ["predictedUsage", "actualUsage"]
          }
        });

        });

        //alert ("script with graphs" + anndatares.length);


// jQuery('#new-graph').tufteBar({
//           data: anndatares,
//           barLabel:  function(index) {
//             amount = ($(this[0]).sum() * 10000).toFixed(0);
//             return '$' + $.tufteBar.formatNumber(amount);
//           },
//           axisLabel: function(index) { return this[1].label },
//           legend: {
//             data: ["predictedUsage", "actualUsage"]
//           }
//         });

      });
    </script>
  </head>
  <body>
    <div id="container">

    <h1>Sophia-Test</h1>
    <p class='intro'><strong>The data represents the evolution of the usage of a list of clients, over the last 12 months.</p>
 
    <div class='example sales'>
      <div class='graph-header'>
        <h3>Evolution of usage: predictedUsage vs. actualUsage</h3>
        <p>Overall view of trends</p>
      </div>
      <div id='stacked-graph' class='graph' style='width: 670px; height: 200px;'></div>
    </div>  

     <div id='new-graph' class='graph' style='width: 670px; height: 200px;'></div>
    </div> 

    <p class='differences'>It is different from other javascript charting libraries because:</p>
    <ul>
      <li>Configuration is by dynamic functions, allowing for a really compact API (very few options)</li>
      <li>Non-core layout is done via CSS rather than code</li>
    </ul>

    
    
  
  <div class="footer">
    <p>Ann with <a href="http://xaviershay.github.io/tufte-graph/">TufteGraph</a> (by Xavier Shay - MIT License)</p>
  </div>
  </div>
  
  </body>
</html>
